import{_ as o,c as a,o as e,a5 as t}from"./chunks/framework.CByBVyi2.js";const m=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"timeline/issue-46.md","filePath":"timeline/issue-46.md","lastUpdated":1725432938000}'),n={name:"timeline/issue-46.md"},i=t('<h2 id="微信小程序不需要账号密码登录-只需要实现打开小程序自动登录-此时的wx-login要放在哪里" tabindex="-1">微信小程序不需要账号密码登录，只需要实现打开小程序自动登录；此时的wx.login要放在哪里？ <a class="header-anchor" href="#微信小程序不需要账号密码登录-只需要实现打开小程序自动登录-此时的wx-login要放在哪里" aria-label="Permalink to &quot;微信小程序不需要账号密码登录，只需要实现打开小程序自动登录；此时的wx.login要放在哪里？&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">原文地址</p><p><a href="https://github.com/jynba/jynba.github.io/issues/46" target="_blank" rel="noreferrer">微信小程序只需要实现打开小程序自动登录；此时的wx.login要放在哪个生命周期？ | GitHub</a></p></div><h3 id="需求" tabindex="-1">需求： <a class="header-anchor" href="#需求" aria-label="Permalink to &quot;需求：&quot;">​</a></h3><p>登录只需要在打开小程序登录一次，且项目中小程序有两个渠道进入，一个是通过搜索进入小程序首页，一个是通过扫码进入套餐页面。</p><h3 id="问题" tabindex="-1">问题： <a class="header-anchor" href="#问题" aria-label="Permalink to &quot;问题：&quot;">​</a></h3><p>最初的想法是把登录放在onLauch一劳永逸，因为onLauch是最早执行的生命周期，后面发现会有问题**(问题1)**：vue中的onLauch和页面的onLoad异步 ，导致登录如果放onLauch会请求返回结果可能会在页面的onLoad之后，导致页面获取不到openId。</p><ul><li>有一个简单且笨拙的<strong>解决方法</strong>：将登录放在涉及到小程序进入的onLoad页面就可以了hhhh，但是如果你的代码中onShow也涉及到执行请求，此时又有个onLoad和onShow请求异步的问题 <strong>(问题2)</strong>，onShow中执行的函数请求可能在登录之前完成，导致获取不到openId。</li><li><strong>最终解决方法</strong>：通过设置有个isFirst的变量，使得第一次进入时onLoad和onShow只执行onLoad不执行onShow，再将onShow中涉及到的函数请求放在onLoad中，这样就可以控制函数请求在登录之后</li></ul>',7),s=[i];function r(l,h,c,d,u,_){return e(),a("div",null,s)}const g=o(n,[["render",r]]);export{m as __pageData,g as default};
